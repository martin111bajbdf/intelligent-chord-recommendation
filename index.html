<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¼ æ™ºèƒ½å’Œå¼¦æ¨èç³»ç»Ÿ | Intelligent Chord Recommendation</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .chord-card {
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
        }
        .chord-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        .diatonic { border-left-color: #3B82F6; }
        .secondary-dominant { border-left-color: #EF4444; }
        .double-dominant { border-left-color: #F59E0B; }
        .modal-interchange { border-left-color: #10B981; }
        .chord-substitution { border-left-color: #8B5CF6; }
        
        .probability-bar {
            height: 4px;
            background: linear-gradient(90deg, #EF4444, #F59E0B, #10B981);
            border-radius: 2px;
        }
        
        .mode-selector {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .recommendation-section {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }
        
        .glass-effect {
            backdrop-filter: blur(10px);
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
    </style>
</head>
<body class="bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 min-h-screen text-white">
    <!-- Header -->
    <header class="glass-effect sticky top-0 z-50 p-4">
        <div class="container mx-auto flex items-center justify-between">
            <div class="flex items-center space-x-3">
                <i class="fas fa-music text-3xl text-yellow-400"></i>
                <div>
                    <h1 class="text-2xl font-bold">æ™ºèƒ½å’Œå¼¦æ¨èç³»ç»Ÿ</h1>
                    <p class="text-sm opacity-80">Intelligent Chord Recommendation System</p>
                </div>
            </div>
            <div class="flex items-center space-x-4">
                <button id="helpBtn" class="p-2 rounded-full hover:bg-white hover:bg-opacity-20 transition-colors">
                    <i class="fas fa-question-circle text-xl"></i>
                </button>
                <button id="settingsBtn" class="p-2 rounded-full hover:bg-white hover:bg-opacity-20 transition-colors">
                    <i class="fas fa-cog text-xl"></i>
                </button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8">
        <!-- Control Panel -->
        <section class="mode-selector rounded-2xl p-6 mb-8 glass-effect">
            <div class="grid md:grid-cols-2 gap-6">
                <!-- Key Selection -->
                <div>
                    <label class="block text-sm font-medium mb-3">
                        <i class="fas fa-key mr-2"></i>ä¸»è°ƒ (Key)
                    </label>
                    <select id="keySelector" class="w-full p-3 rounded-lg bg-white bg-opacity-20 border border-white border-opacity-30 text-white focus:outline-none focus:ring-2 focus:ring-yellow-400">
                        <option value="C">C Major / A Minor</option>
                        <option value="C#">C# Major / A# Minor</option>
                        <option value="D">D Major / B Minor</option>
                        <option value="D#">D# Major / C Minor</option>
                        <option value="E">E Major / C# Minor</option>
                        <option value="F">F Major / D Minor</option>
                        <option value="F#">F# Major / D# Minor</option>
                        <option value="G">G Major / E Minor</option>
                        <option value="G#">G# Major / F Minor</option>
                        <option value="A">A Major / F# Minor</option>
                        <option value="A#">A# Major / G Minor</option>
                        <option value="B">B Major / G# Minor</option>
                    </select>
                </div>

                <!-- Mode Selection -->
                <div>
                    <label class="block text-sm font-medium mb-3">
                        <i class="fas fa-sliders-h mr-2"></i>è°ƒå¼ (Mode)
                    </label>
                    <select id="modeSelector" class="w-full p-3 rounded-lg bg-white bg-opacity-20 border border-white border-opacity-30 text-white focus:outline-none focus:ring-2 focus:ring-yellow-400">
                        <option value="Ionian">Ionian (ä¼Šå¥¥å°¼äºš - å¤§è°ƒ)</option>
                        <option value="Aeolian">Aeolian (çˆ±å¥¥åˆ©äºš - å°è°ƒ)</option>
                        <option value="Dorian">Dorian (å¤šé‡Œå®‰)</option>
                        <option value="Phrygian">Phrygian (å¼—é‡Œå‡ äºš)</option>
                        <option value="Lydian">Lydian (åˆ©åº•äºš)</option>
                        <option value="Mixolydian">Mixolydian (æ··åˆåˆ©åº•äºš)</option>
                        <option value="Locrian">Locrian (æ´›å…‹é‡Œäºš)</option>
                        <option value="HarmonicMinor">Harmonic Minor (å’Œå£°å°è°ƒ)</option>
                        <option value="MelodicMinor">Melodic Minor (æ—‹å¾‹å°è°ƒ)</option>
                    </select>
                </div>
            </div>

            <!-- Current Chord Input -->
            <div class="mt-6">
                <label class="block text-sm font-medium mb-3">
                    <i class="fas fa-guitar mr-2"></i>å½“å‰å’Œå¼¦ (Current Chord)
                </label>
                <div class="flex space-x-3">
                    <input 
                        type="text" 
                        id="currentChordInput" 
                        placeholder="ä¾‹å¦‚: Am, Cmaj7, G7, Dm9..."
                        class="flex-1 p-3 rounded-lg bg-white bg-opacity-20 border border-white border-opacity-30 text-white placeholder-gray-300 focus:outline-none focus:ring-2 focus:ring-yellow-400"
                    >
                    <button 
                        id="analyzeBtn" 
                        class="px-6 py-3 bg-yellow-500 hover:bg-yellow-600 text-black font-semibold rounded-lg transition-colors"
                    >
                        <i class="fas fa-search mr-2"></i>åˆ†æ
                    </button>
                </div>
            </div>

            <!-- Current Scale Display -->
            <div id="currentScaleDisplay" class="mt-4 p-4 bg-white bg-opacity-10 rounded-lg hidden">
                <h3 class="font-semibold mb-2">å½“å‰è°ƒå¼éŸ³é˜¶:</h3>
                <div id="scaleNotes" class="flex flex-wrap gap-2"></div>
            </div>
        </section>

        <!-- Recommendations Grid -->
        <section class="grid lg:grid-cols-2 xl:grid-cols-3 gap-6 mb-8">
            <!-- Diatonic Recommendations -->
            <div class="recommendation-card bg-white bg-opacity-10 rounded-2xl p-6 glass-effect">
                <div class="flex items-center mb-4">
                    <div class="w-4 h-4 bg-blue-500 rounded mr-3"></div>
                    <h2 class="text-xl font-bold">è°ƒå†…å’Œå¼¦</h2>
                    <span class="ml-2 text-sm opacity-70">Diatonic</span>
                </div>
                <div id="diatonicRecommendations" class="space-y-3">
                    <div class="text-center text-gray-400 py-8">
                        <i class="fas fa-music text-3xl mb-2"></i>
                        <p>è¯·é€‰æ‹©å½“å‰å’Œå¼¦å¼€å§‹åˆ†æ</p>
                    </div>
                </div>
            </div>

            <!-- Secondary Dominant Recommendations -->
            <div class="recommendation-card bg-white bg-opacity-10 rounded-2xl p-6 glass-effect">
                <div class="flex items-center mb-4">
                    <div class="w-4 h-4 bg-red-500 rounded mr-3"></div>
                    <h2 class="text-xl font-bold">å‰¯å±å’Œå¼¦</h2>
                    <span class="ml-2 text-sm opacity-70">Secondary Dominant</span>
                </div>
                <div id="secondaryDominantRecommendations" class="space-y-3">
                    <div class="text-center text-gray-400 py-8">
                        <i class="fas fa-arrow-right text-3xl mb-2"></i>
                        <p>ç­‰å¾…å’Œå¼¦åˆ†æ...</p>
                    </div>
                </div>
            </div>

            <!-- Double Dominant Recommendations -->
            <div class="recommendation-card bg-white bg-opacity-10 rounded-2xl p-6 glass-effect">
                <div class="flex items-center mb-4">
                    <div class="w-4 h-4 bg-yellow-500 rounded mr-3"></div>
                    <h2 class="text-xl font-bold">é‡å±å’Œå¼¦</h2>
                    <span class="ml-2 text-sm opacity-70">Double Dominant</span>
                </div>
                <div id="doubleDominantRecommendations" class="space-y-3">
                    <div class="text-center text-gray-400 py-8">
                        <i class="fas fa-link text-3xl mb-2"></i>
                        <p>ç­‰å¾…å’Œå¼¦åˆ†æ...</p>
                    </div>
                </div>
            </div>

            <!-- Modal Interchange Recommendations -->
            <div class="recommendation-card bg-white bg-opacity-10 rounded-2xl p-6 glass-effect">
                <div class="flex items-center mb-4">
                    <div class="w-4 h-4 bg-green-500 rounded mr-3"></div>
                    <h2 class="text-xl font-bold">è°ƒå¼å€Ÿç”¨</h2>
                    <span class="ml-2 text-sm opacity-70">Modal Interchange</span>
                </div>
                <div id="modalInterchangeRecommendations" class="space-y-3">
                    <div class="text-center text-gray-400 py-8">
                        <i class="fas fa-exchange-alt text-3xl mb-2"></i>
                        <p>ç­‰å¾…å’Œå¼¦åˆ†æ...</p>
                    </div>
                </div>
            </div>

            <!-- Chord Substitution Recommendations -->
            <div class="recommendation-card bg-white bg-opacity-10 rounded-2xl p-6 glass-effect">
                <div class="flex items-center mb-4">
                    <div class="w-4 h-4 bg-purple-500 rounded mr-3"></div>
                    <h2 class="text-xl font-bold">å’Œå¼¦æ›¿ä»£</h2>
                    <span class="ml-2 text-sm opacity-70">Substitutions</span>
                </div>
                <div id="chordSubstitutionRecommendations" class="space-y-3">
                    <div class="text-center text-gray-400 py-8">
                        <i class="fas fa-random text-3xl mb-2"></i>
                        <p>ç­‰å¾…å’Œå¼¦åˆ†æ...</p>
                    </div>
                </div>
            </div>

            <!-- Comprehensive Recommendations -->
            <div class="recommendation-card bg-white bg-opacity-10 rounded-2xl p-6 glass-effect">
                <div class="flex items-center mb-4">
                    <div class="w-4 h-4 bg-gradient-to-r from-pink-500 to-yellow-500 rounded mr-3"></div>
                    <h2 class="text-xl font-bold">ç»¼åˆæ¨è</h2>
                    <span class="ml-2 text-sm opacity-70">Top Picks</span>
                </div>
                <div id="comprehensiveRecommendations" class="space-y-3">
                    <div class="text-center text-gray-400 py-8">
                        <i class="fas fa-star text-3xl mb-2"></i>
                        <p>ç­‰å¾…å’Œå¼¦åˆ†æ...</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Chord Progression Builder -->
        <section class="bg-white bg-opacity-10 rounded-2xl p-6 glass-effect">
            <div class="flex items-center justify-between mb-6">
                <div class="flex items-center">
                    <i class="fas fa-list-ol text-2xl mr-3 text-yellow-400"></i>
                    <h2 class="text-2xl font-bold">å’Œå¼¦è¿›è¡Œæ„å»ºå™¨</h2>
                </div>
                <div class="flex space-x-2">
                    <button id="clearProgressionBtn" class="px-4 py-2 bg-red-500 hover:bg-red-600 rounded-lg transition-colors">
                        <i class="fas fa-trash mr-2"></i>æ¸…ç©º
                    </button>
                    <button id="playProgressionBtn" class="px-4 py-2 bg-green-500 hover:bg-green-600 rounded-lg transition-colors">
                        <i class="fas fa-play mr-2"></i>æ’­æ”¾
                    </button>
                </div>
            </div>
            
            <div id="chordProgression" class="flex flex-wrap gap-3 min-h-16 p-4 bg-black bg-opacity-20 rounded-lg border-2 border-dashed border-gray-500">
                <div class="text-gray-400 text-center w-full py-4">
                    ç‚¹å‡»æ¨èçš„å’Œå¼¦æ¥æ„å»ºè¿›è¡Œ...
                </div>
            </div>
        </section>
    </main>

    <!-- Help Modal -->
    <div id="helpModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white text-black rounded-2xl p-8 max-w-2xl max-h-96 overflow-y-auto">
            <div class="flex items-center justify-between mb-6">
                <h2 class="text-2xl font-bold">ä½¿ç”¨å¸®åŠ©</h2>
                <button id="closeHelpBtn" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            <div class="space-y-4">
                <div>
                    <h3 class="font-semibold text-blue-600">ğŸ¯ è°ƒå†…å’Œå¼¦ (Diatonic)</h3>
                    <p class="text-sm text-gray-600">åŸºäºå½“å‰è°ƒå¼çš„è‡ªç„¶å’Œå¼¦è¿›è¡Œï¼Œéµå¾ªä¼ ç»Ÿå’Œå£°å­¦è§„å¾‹</p>
                </div>
                <div>
                    <h3 class="font-semibold text-red-600">ğŸ¯ å‰¯å±å’Œå¼¦ (Secondary Dominant)</h3>
                    <p class="text-sm text-gray-600">ä¸ºè°ƒå†…å’Œå¼¦åˆ›å»ºä¸´æ—¶çš„å±å’Œå¼¦ï¼Œå¢åŠ å’Œå£°è‰²å½©</p>
                </div>
                <div>
                    <h3 class="font-semibold text-yellow-600">ğŸ¯ é‡å±å’Œå¼¦ (Double Dominant)</h3>
                    <p class="text-sm text-gray-600">å¤šå±‚å±å’Œå¼¦é“¾ï¼Œå¦‚ V/V/Vï¼Œåˆ›é€ æ›´å¤æ‚çš„å’Œå£°è¿›è¡Œ</p>
                </div>
                <div>
                    <h3 class="font-semibold text-green-600">ğŸ¯ è°ƒå¼å€Ÿç”¨ (Modal Interchange)</h3>
                    <p class="text-sm text-gray-600">ä»å¹³è¡Œè°ƒå¼å€Ÿç”¨å’Œå¼¦ï¼Œä¸°å¯Œå’Œå£°è°ƒè‰²æ¿</p>
                </div>
                <div>
                    <h3 class="font-semibold text-purple-600">ğŸ¯ å’Œå¼¦æ›¿ä»£ (Substitutions)</h3>
                    <p class="text-sm text-gray-600">ä½¿ç”¨å‡ä¸ƒã€åŠå‡ã€å¢å’Œå¼¦ç­‰æ›¿ä»£ä¼ ç»Ÿå’Œå¼¦</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Loading Indicator -->
    <div id="loadingIndicator" class="fixed top-4 right-4 bg-yellow-500 text-black px-4 py-2 rounded-lg hidden">
        <i class="fas fa-spinner fa-spin mr-2"></i>åˆ†æä¸­...
    </div>

    <!-- JavaScript -->
    <script type="module" src="app.js"></script>
</body>
</html>